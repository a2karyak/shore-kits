#
# @file:  shore.conf
#
# @brief: Shore configuration file
#
# @note:  There is a number of predefined configurations, 
#         make sure to have only 1 "config" parameter set
#



##### Device

# Clobber device (1=yes,0=no)

#db-clobberdev = 1
db-clobberdev = 0



##### System (baseline/dora...)
system = baseline
#system = dora



##### Benchmark (tpcc/tm1/...)
#benchmark = tpcc
benchmark = tm1


##### Platform-specific Parameter

# CPU Counts
# hard-limit (machine dependent)
sys-maxcpucount = 64
# soft-limit
sys-activecpucount = 64


##### Shore parameters

# Enable/Disable logging (yes/no)
#logging = no
shore-logging = yes

# misc
shore-diskrw = /export/home/ipandis/DEV/shore-lomond/installed/bin/diskrw
shore-errlog = info # one of {none emerg fatal alert internal error warning info debug}

# shore fake io delay (in usec)

# whether the io delay will be enabled or not
shore-fakeiodelay-enable = 1

# the actual delay
#shore-fakeiodelay = 5
shore-fakeiodelay = 0


# number of page cleaners
shore-pagecleaners = 16
#shore-pagecleaners = 4
#shore-pagecleaners = 2



##### Worker parameters

# number of worker threads
db-workers = 64
#db-workers = 1

# srmw-queue spin
#db-queueloops = 1
#db-worker-queueloops = 2000
db-worker-queueloops = 10000

# use sli?
db-worker-sli = 0
#db-worker-sli = 1


# number of loader threads
db-loaders = 1

# number of (single-threaded) preloads to do before firing up the threads
db-record-preloads = 2000


##### Client parameters

# think time 
# note: it should be combined with batchsz=1
db-cl-thinktime = 0

# batch sz
db-cl-batchsz = 30



##### Workload parameters

# TEST
test-num-queried = 32       # no of whs queried
test-spread      = 1        # 0=No,1=Yes
test-num-threads = 32
test-num-trxs    = 10       # no of trxs per thread
test-trx-id      = 111      # e.g. 2=Base-Pay,102=Dora-Pay
test-iterations  = 2 
test-sli         = 0        # 0=No,1=Yes
test-cl-binding  = 0        # client binding policy - 0=NoBinding,1=Adjacent,2=SpreadToCores

# MEASURE
measure-num-queried = 32    # no of whs queried
measure-spread      = 1     # 0=No,1=Yes
measure-num-threads = 32
measure-duration    = 30    # duration of each iteration (in secs.)
measure-trx-id      = 102   # 2=Base-Pay,102=Dora-Pay
measure-iterations  = 2
measure-sli         = 0
measure-cl-binding  = 0     # client binding policy - 0=NoBinding,1=Adjacent,2=SpreadToCores




##### DORA parameters


# dora worker thread binding policy
# 0=NoBinding,1=Other
dora-cpu-binding = 0

# starting cpu - the initial cpu of the dora tables
dora-cpu-starting = 2

# table-step - the number of cpus between two tables
dora-cpu-table-step = 16

# partition-step - the number of cpus between two partitions of the same table
dora-cpu-partition-step = 2


### dora-tpcc setup

dora-tpcc-wh-per-part-wh    = 3
dora-tpcc-wh-per-part-dist  = 3
dora-tpcc-wh-per-part-cust  = 1
dora-tpcc-wh-per-part-hist  = 1

dora-tpcc-wh-per-part-nord  = 100 # IP: only one partition
dora-tpcc-wh-per-part-ord   = 100
dora-tpcc-wh-per-part-item  = 100
dora-tpcc-wh-per-part-oline = 100
dora-tpcc-wh-per-part-stock = 100




#############################
#                           #
# Predefined configurations #
#                           #
#############################

#db-config = 1wh
#db-config = 10wh
#db-config = 10wh-nl
#db-config = 50wh
#db-config = 100wh
#db-config = 100wh-nl
#db-config = 1000wh

db-config = 1sf-tm1





########################
####                ####
#### 1SF TM-1 DB ####
####                ####
########################

### Device file
1sf-tm1-device = databases/tm1-db-1sf

### Device quota (in KB)
### 200MB
1sf-tm1-devicequota = 204800

### Buffer pool size (in KB)
### 1GB (db in memory)
1sf-tm1-bufpoolsize = 1024000

### Location of log directory
1sf-tm1-logdir = log-tm1-1

### Size of log (in KB)
### 1GB 
1sf-tm1-logsize = 1024000

### Size of log buffer (in KB)
### 80MB
1sf-tm1-logbufsize = 81920

### tpcc-specific
1sf-tm1-loadatadir = flatfiles/sf1

### tppc-sf
1sf-tm1-sf = 1




#########################
####                 ####
#### 1WH DB (~100MB) ####
####                 ####
#########################


### Device file
1wh-device = databases/shore1wh

### Device quota (in KB)
### 200MB
1wh-devicequota = 204800

### Buffer pool size (in KB)
### 1GB (db in memory)
1wh-bufpoolsize = 1024000

### Location of log directory
1wh-logdir = log1

### Size of log (in KB)
### 1GB 
1wh-logsize = 1024000

### Size of log buffer (in KB)
### 80MB
1wh-logbufsize = 81920

### tpcc-specific
1wh-loadatadir = flatfiles/sf1

### tppc-sf
1wh-sf = 1


########################
####                ####
#### 10WH DB (~1GB) ####
####                ####
########################


### Device file
10wh-device = databases/shore10wh

### Device quota (in KB)
### 12GB
10wh-devicequota = 12097152

### Buffer pool size (in KB)
### 4GB (db in memory)
10wh-bufpoolsize = 4096000

### Location of log directory
10wh-logdir = log10

### Size of log (in KB)
### 2GB 
10wh-logsize = 2048000

### Size of log buffer (in KB)
### 80MB
10wh-logbufsize = 81920

### tpcc-specific
10wh-loadatadir = flatfiles/sf10

### tppc-sf
10wh-sf = 10




#####################################
####                             ####
#### 10WH DB + NOLOCK-IDX (~1GB) ####
####                             ####
#####################################


### Device file
10wh-nl-device = databases/shore10wh-nl

### Device quota (in KB)
### 12GB
10wh-nl-devicequota = 12097152

### Buffer pool size (in KB)
### 4GB (db in memory)
10wh-nl-bufpoolsize = 4096000

### Location of log directory
10wh-nl-logdir = log10-nl

### Size of log (in KB)
### 2GB 
10wh-nl-logsize = 2048000

### Size of log buffer (in KB)
### 80MB
10wh-nl-logbufsize = 81920

### tpcc-specific
10wh-nl-loadatadir = flatfiles/sf10

### tppc-sf
#10wh-nl-sf = 1
#10wh-nl-sf = 8
10wh-nl-sf = 10



########################
####                ####
#### 50WH DB (~5GB) ####
####                ####
########################


### Device file
50wh-device = tbl_tpcc/shore50wh

### Device quota (in KB)
### 10GB
50wh-devicequota = 10485760

### Buffer pool size (in KB)
### 3GB (half db in disk)
#bufpoolsize = 3145728
### 4GB (db in disk)
50wh-bufpoolsize = 4192000

### Location of log directory
50wh-logdir = log

### Size of log (in KB)
### 1GB 
#logsize = 1024000
### 6GB
50wh-logsize = 6291456

### Size of log buffer (in KB)
### 80MB
50wh-logbufsize = 81920

### tpcc-specific
50wh-loadatadir = stagetrxdata/sf50

### tppc-sf
50wh-sf = 50



##########################
####                  ####
#### 100WH DB (~10GB) ####
####                  ####
##########################


### Device file
100wh-device = databases/shore100wh

### Device quota (in KB)
### 20GB
100wh-devicequota = 20971520

### Buffer pool size (in KB)
### 12GB (db in memory)
100wh-bufpoolsize = 12582912

### Location of log directory
100wh-logdir = log100

### Size of log (in KB)
### 2GB
100wh-logsize = 2048000

### Size of log buffer (in KB)
### 80MB
100wh-logbufsize = 81920

### tpcc-specific
100wh-loadatadir = flatfiles/sf100

### tppc-sf
100wh-sf = 100



 
#######################################
####                               ####
#### 100WH DB + NOLOCK-IDX (~10GB) ####
####                               ####
#######################################


### Device file
100wh-nl-device = databases/shore100wh-nl

### Device quota (in KB)
### 20GB
100wh-nl-devicequota = 20971520

### Buffer pool size (in KB)
### 12GB (db in memory)
100wh-nl-bufpoolsize = 12582912

### Location of log directory
100wh-nl-logdir = log100-nl

### Size of log (in KB)
### 2GB 
100wh-nl-logsize = 2048000

### Size of log buffer (in KB)
### 80MB
100wh-nl-logbufsize = 81920

### tpcc-specific
100wh-nl-loadatadir = flatfiles/sf100

### tppc-sf
#100wh-nl-sf = 1
#100wh-nl-sf = 2
#100wh-nl-sf = 32
100wh-nl-sf = 64
#100wh-nl-sf = 100






############################
####                    ####
#### 1000WH DB (~100GB) ####
####                    ####
############################


### Device file
1000wh-device = tbl_tpcc/shore1000wh

### Device quota (in KB)
### 200GB
1000wh-devicequota = 204800000

### Buffer pool size (in KB)
### 10GB (db in disk)
1000wh-bufpoolsize = 10240000

### Location of log directory
1000wh-logdir = dsklog

### Size of log (in KB)
### 4GB
1000wh-logsize = 4096000

### Size of log buffer (in KB)
### 80MB
1000wh-logbufsize = 81920


### tpcc-specific
1000wh-loadatadir = flatfiles/sf1000

### tppc-sf
1000wh-sf = 1000



###############################
###############################

